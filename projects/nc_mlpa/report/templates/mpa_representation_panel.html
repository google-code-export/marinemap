{% extends 'common/panel.html' %}
{% block head %}
	<link rel="stylesheet" href="{{MEDIA_URL}}projects/nc_mlpa/css/mpa_hab_representation.css" type="text/css" media="all" title="no title" charset="utf-8"/>
{% endblock head %}
{% block title %}{{mpa.name}} Representation Report{% endblock title %}
{% block panel %}
    <div class="tabs">
        <ul>
            <li><a href="#RepresentationChart"><span>Chart</span></a></li>
            <li><a href="#RepresentationDataTable"><span>Data Table</span></a></li>
        </ul>
        <div id="RepresentationChart">
            <div style="width:450px;" class="habitat_representation" id="HabitatRepresentation"></div>
            <script type="text/javascript" charset="utf-8">
                var hab_data = JSON.parse('{{json|safe}}');
                lingcod.panelEvents({
                    show: function(el){
                        var report = mlpa.representationReport($('#HabitatRepresentation'), hab_data, true);
                        window.report = report;
                        window.json = hab_data;
                        // console.log(JSON.stringify(hab_data));
                    }
                });
            </script>
        </div>
        <div id="RepresentationDataTable">
        	<table class='hab_repr_container'>
        		<tr>
        			<th>Habitat</th>
        			<th>Quantity</th>
        			<th>Units</th>
        			<th>Percent of SR Total</th>
        		</tr>
        		{% for sort_num,sub_dict in result.items %}
        		<tr class="{% cycle '' 'grey' %}">
        			<td class="habitat_name">{{ sub_dict.name|title }}</td>
        			<td class="mpa_hab_result">
        				<span class="rounded">{{ sub_dict.result|floatformat:'2' }}</span>
        				<span class="unrounded">{{ sub_dict.result|floatformat:'-6' }}</span>
        			</td>
        			<td>{{ sub_dict.units }}</td>
        			<td class="numeric">{{ sub_dict.percent_of_total|floatformat:'-2' }}%</td>
        		</tr>
        		{% endfor %}
        	</table>            
        </div>
    </div>
{% endblock panel %}