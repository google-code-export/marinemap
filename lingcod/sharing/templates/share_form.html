<!-- User :: {{ user.name }} -->
{% load order_by %}
<style>
.group_list { font-size: 9px; display:none; }
.group_text { font-size: 9px; }
.show { display:block; }
</style>

<script>
$("#group_button").click(function() { 
   $("ul.group_list").toggleClass('show'); 
});
</script>

<br/>

{% if groups %}
    <p> Share <em>{{ obj_type_verbose }}</em> named <strong>{{ obj }}</strong> with the following groups</p>

    <div>
        <a href="#" id="group_button" class="button" onclick='this.blur(); return false;'>
            <span id="group_text">Toggle group members</span>
        </a>
    </div>
    <br/>
    <br/>

    <form action="" method="POST">
        {% for group in groups %} 
        <label class="shareform"> <input type="checkbox" class="shareform" name="sharing_groups" {% if group in already_shared_groups %}checked="checked"{% endif %} value="{{group.id}}" id="group_{{group.id}}"/> {{group.name}} 

            <ul class="group_list">
              {% for user in group.user_set.all|order_by:"username" %}
              <li> {{user.username}} </li>
              {% endfor %}
            </ul>

        </label>
        {% endfor %}
        
    </form>
{% else %}
    <label> Can't share <em>{{ obj_type_verbose }}</em> named <strong>{{ obj }}</strong>. You don't belong to any groups with appropriate permissions to share that object.  </div>
{% endif %}
